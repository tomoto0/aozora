# 青空文庫リーダー - タスク管理

## 実装済み機能
- [x] ホームページ（ランディングページ）
- [x] 書籍検索ページ
- [x] 書籍詳細表示
- [x] テキスト表示機能
- [x] Shift JISエンコーディング対応
- [x] React インポート修正
- [x] tRPC統合

## 本番環境の問題修正
- [x] React Error #321 の原因特定（インポート不足）
- [x] ZIPダウンロード処理の改善（encoding-japanese使用）
- [x] User-Agent ヘッダーの改善
- [x] Shift-JISからUTF-8への変換実装
- [x] 開発環境での動作確認（書籍検索、テキスト表示が正常）
- [x] 本番環境でのReact Error #321を修正
- [x] 実際のZIPファイルダウンロード機能を実装
- [x] エラーハンドリングの改善

## デプロイ準備
- [x] チェックポイント作成準備完了
- [x] 本番環境へのデプロイ準備完了
- [x] 本番環境での動作確認（検索機能正常、テキスト表示正常）
- [x] 最終チェックポイント作成準備完了

## 確認済み機能
- [x] 書籍検索機能（サーバー側の検索実装）
- [x] テキスト表示機能（実際のZIPファイルからダウンロード）
- [x] 日本語テキストの正しいデコード
- [x] 複数の書籍へのアクセス
- [x] React Error #321の完全な解決

## 外部青空文庫API統合
- [x] 利用可能な青空文庫APIを調査して最適なAPIを選択する
- [x] 選択したAPIをserver/routers.tsに統合する（公式CSVファイル使用）
- [x] フロントエンドのBooksPage.tsxを更新してAPI連携を実装する
- [x] 開発環境でテストして動作確認する
- [x] 18,000件以上の全作品から検索可能
- [x] ページネーション機能実装（20件ずつ表示）
- [x] 人気作品の初期表示機能
- [x] チェックポイントを作成して本番環境にデプロイする

## 次のステップ
- [x] 最終チェックポイントを作成
- [x] 本番環境にデプロイして動作確認

## バグ修正
- [x] 検索機能の500エラーを修正する
- [x] 本番環境でcurlが利用できない問題を修正（fetch APIを使用）

## 新機能追加
- [x] フォントサイズ調整機能を追加する
- [x] 本文の文字色を黒に変更する
- [x] テキスト表示画面にライト/ダークモード切り替えボタンを追加する

## 本棚・お気に入り・読書進捗機能
- [x] データベーススキーマを設計する（bookshelf, reading_progress テーブル）
- [x] サーバー側のAPI（tRPCルーター）を実装する
- [x] お気に入り機能のUIを実装する
- [x] 本棚画面を実装する（本棚から除く機能含む）
- [x] 読書進捗の保存機能を実装する
- [x] 全機能をテストして動作確認する

## AI あらすじ生成機能
- [x] Manus LLM APIの使い方を確認する
- [x] サーバー側のあらすじ生成APIを実装する
- [x] フロントエンドにあらすじボタンとポップアップを実装する
- [x] 開発環境でテストして動作確認する

## あらすじポップアップの改善
- [x] プレーンテキストで表示する（マークダウン記号なし）
- [x] ポップアップのサイズを大きくする
- [x] スクロール機能を追加する
- [x] 閉じるボタンを確認・改善する

## あらすじ保存機能
- [x] データベーススキーマを更新してあらすじ保存用のカラムを追加する
- [x] サーバー側のあらすじ保存APIを実装する
- [x] フロントエンドに「あらすじを保存する」ボタンを追加する
- [x] 開発環境でテストして動作確認する
- [x] 本棚ページで保存されたあらすじを表示できるようにする

## SEO改善
- [x] index.htmlにメタタグ（description, keywords）を追加する
- [x] ページタイトル。30-60文字に設定する（30文字）
- [x] メタディスクリプション。50-160文字に設定する（112文字）
- [x] 開発環境でテストして動作確認する

## OGP画像設定
- [x] 青空文庫リーダーアプリ用のOGP画像を生成する
- [x] 画像をプロジェクトに保存してog:imageメタタグを設定する
- [x] 開発環境でテストして動作確認する

## README.md作成
- [x] README.mdの内容を設計してファイルを作成する
- [x] アーキテクチャ図を生成してREADME.mdに統合する

## README.mdへのOGP画像追加
- [x] README.mdにOGP画像を追加する
